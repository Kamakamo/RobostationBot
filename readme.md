# Бот-помощник для выставки

Телеграм-бот на Python, предназначенный для автоматизации процесса приема и обработки заявок от демонстраторов на выставочном стенде.

## Функционал

-   **Для демонстраторов:**
    -   Пошаговое создание заявки о поломке через интуитивно понятное меню с кнопками.
    -   Возможность выбрать экспонат и типичную проблему или описать ее вручную.
    -   Получение уведомлений о том, что заявка принята в работу и завершена.
    -   Команда `/myrequests` для просмотра статуса своих заявок.
-   **Для инженеров:**
    -   Получение новых заявок в выделенный групповой чат.
    -   Возможность "взять в работу" и "завершить" заявку нажатием одной кнопки.
    -   Команды `/new` и `/inprogress` для просмотра актуальных заявок в личных сообщениях или в группе.
    -   Интерактивные кнопки для взятия заявок в работу прямо из списка `/new`.
-   **Администрирование:**
    -   Все заявки логируются в Google Sheets с указанием времени, статуса, ответственных и т.д.
    -   Гибкая настройка списка инженеров, экспонатов и проблем через Google Sheets без изменения кода.
    -   Команда `/status` для быстрой диагностики состояния бота.

## Технологический стек

-   Python 3.11+
-   [python-telegram-bot](https://github.com/python-telegram-bot/python-telegram-bot)
-   [gspread](https://github.com/burnash/gspread) для интеграции с Google Sheets
-   [Pandas](https://pandas.pydata.org/)
-   [Docker](https://www.docker.com/) & [Docker Compose](https://docs.docker.com/compose/) для контейнеризации

## Настройка и запуск

### 1. Предварительные требования

-   Python 3.11+
-   Docker и Docker Compose (рекомендуется)
-   Аккаунт Google и созданный проект в Google Cloud.

### 2. Клонирование репозитория

```bash
git clone https://github.com/ВАШ_НИКНЕЙМ/telegram-exhibition-bot.git
cd telegram-exhibition-bot
```

### 3. Настройка окружения

1.  **Создайте Telegram-бота** через `@BotFather` и получите токен.
2.  **Настройте Google Sheets API:**
    -   Следуйте [инструкции](https://docs.gspread.org/en/latest/oauth2.html#for-bots-service-account) для создания сервисного аккаунта.
    -   Скачайте JSON-ключ и переименуйте его в `credentials.json`, положите в корень проекта.
    -   Создайте Google Таблицу с тремя листами: `Заявки`, `Инженеры`, `Экспонаты`.
    -   Предоставьте сервисному аккаунту права "Редактора" для этой таблицы.
3.  **Создайте файл `.env`** в корне проекта, скопировав содержимое из `env.example`, и заполните его вашими данными.

    ```bash
    cp env.example .env
    # Теперь отредактируйте .env вашими значениями
    ```

### 4. Запуск

#### Вариант А: Через Docker (рекомендуется)

```bash
# Сборка образа и запуск контейнера в фоновом режиме
docker-compose up --build -d
```
Чтобы посмотреть логи:
```bash
docker-compose logs -f
```
Чтобы остановить:
```bash
docker-compose down
```

#### Вариант Б: Локальный запуск

1.  Создайте и активируйте виртуальное окружение:
    ```bash
    python -m venv .venv
    source .venv/bin/activate  # для Linux/macOS
    # .\.venv\Scripts\activate  # для Windows
    ```
2.  Установите зависимости:
    ```bash
    pip install -r requirements.txt
    ```
3.  Запустите бота:
    ```bash
    python main.py
    ```

## Команды бота

-   `/start` - Начать работу с ботом, создать заявку.
-   `/myrequests` - Показать мои заявки и их статус.
-   `/new` - (Для инженеров) Показать список новых заявок.
-   `/inprogress` - (Для инженеров) Показать список заявок в работе.
-   `/status` - (Для администраторов) Показать статус и диагностику бота.